(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/grass-dirt-tile-sheet.dc2e3afb.png"},function(e,t,a){e.exports=a(33)},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/player-character.8eac3d76.png"},function(e,t,a){},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFUUlEQVRYhXVXLW/kSBB9yYxOrdPpVMBaGSwosDoZBDQYMNDoNNBwoeHBAfcDDPYHLAwcGBBgONDgwMAGAQ0LLDAIaBBFDVbKAafabU+2ydjd7fp89armpizxFiPh+/cazITTyUEkgJnATBAJOJ8dqorRdTWGQdLZMAh0DYPAe0FVMeqaF+9dN8vWuwDgvWCz23F3f3+AtSX63uN43KNpKgCAcyNEAoqCkhAigxAiQoiwtgQAhBDBTHh5AZwLKEsDIoPt1qCuGQDATItvRAJ+/AA2MYZut2MwE/reJwuJTLqoSxWrhwBQ1wznxmRcjBFEBiIBXVcn5X3vEUKESEhRNAa4jXEOZ11zCn+u2HtJnoiEdFbXnMKq56pQI5Ybq3JVT10zNvt92al3zo04Hvfpg8naEY+PX5MiZkoei4QUfn3OI+XcmCLp3Lg4s7bEMAhu15blygHAWkqg0/RoFIZB0LY2Paus89mlMOcR00hpxJkJG2bqFFhqof6ezw5FQcnaHHTqueZW94kMXl6QDNa850aIBBCZyYC65s65caEwhIi+F9zdlTidmkX4NK/OjbC2TJghMgl81pZ4eLhAwa2e5zhRJzbWlt3l4rHbMbZbg2EYMY4CY0ocjxbDIElx7rl6m3ukXhIZFAXhdPKoKkoY0GipDOdGbIhMVxQE2jLo00+Mo4CZQYQklMigaaoEPgXYGt0aiWEQOBdhzAiRCO+fsd9/TkrVgIQB5wLMny/v6ORU63moVIEqVSRrJHLkq6LDocJ+/xlVVaDvPaqquAL7rYjA2imvbWvRtnZRz5rDNaL17KP9CQeU6l0kYBzH5ER+b2Mtd6pcywwATiePcZzD+lFN6yKaKde5Ed4LimKmbaVzxVcISBW1VVRrE1LrmoZxPi9ZTtkyZ8qcOafcB1jLcC4AmBrSw0O7uKO/3gtu2ta+KZkkoU8G+GNmu76f0qTG5SFcr3w/p+8cP/md23UeRQL4LiZDRAKahuH9zGw50+UGqbK+F5zP7sNIraO2YaYuz6tecm5EeH1OpFMUhKap0DQVioLQ9wLvPYYhwBjgfHb48mUipvv7A3Y7XpStlrPiQvF003X1Ww6+3ErN9xrpClhtUKeTgKdow3vB5XJcnOfy9FmjcLtWrBe0JBepydrr6eTSedtOoGMmHA7Tnp7n9JvnX/XdENEbUQDzfLFt7S87WT6Gre/kvT6PZH7/KgKq/Feko8Z8lKa14Kn05ijm5+vyTVQMUBejARBxkYB//9ml9qul0zTVFeWu2y0AjCNANM9/63sqQ0nNuRG3TcOIUSACVO89eu1FPoToWu9NXi49zGUo+axHv41I7B4fv4IIGIYAIqS2maj3P4A+/YQ8GYTX52S9jmE6kIgEeC/Y7WYFKkM7qypP80BZxk47oDaQdZ8Pr89Th/y7WNQ1My3GbOcC7u6m93y40RatXTKfrDZ933bqTT75rK3O86hTj95Xzx8fvwIAmqZKY9nDw+VqRNNvuq6eqFi9cS4syuyjWS7fz3N5uRwzYnqn4SeDw8G+y3Xo+5nOT6cGwyDTRKSeGDMjWGlTAaeKVYCen88O374dEm6sLdG2dvL0t2nIORwYRNMfER3/tMLSVAwAznkwl1eEobjI3zVtux0nUObjmpZa+EEIr8+T8UWF7e8/FyneEJlOR+QQgIsEFGZ7VcPOjYuhQwFobZkYMp8h9Zn/2qYRXCtoGEbEOBlxU9f8pjmehgmCDxEmGDBfc/cwBNQ1Xe3nGFnzQJ66+S5Q14SbssRbVTFEpmlYBIhx+lstMx7fhS7f9e+3KsyNygG7XiKzrP8BmMMM11OGFTsAAAAASUVORK5CYIIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(9),o=a.n(n),r=(a(17),a(2)),c=a(3),h=a(5),l=a(4),u=a(6),g=a(1),d=(a(19),a(7)),p=(a(21),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.handleKeyPress=a.handleKeyPress.bind(Object(g.a)(Object(g.a)(a))),a.handleChange=a.handleChange.bind(Object(g.a)(Object(g.a)(a))),a.state={chatMessage:"",disabled:"",chatName:!1,authorColor:!1,chatHistory:[]},a.input=i.a.createRef(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleKeyPress",value:function(e){if("Enter"===e.key){var t=this.state.chatMessage;if(!t)return;this.props.connection.send(JSON.stringify({type:"chat-message",data:t})),this.setState({chatMessage:""}),!1===this.state.chatName&&(console.log("chatMessage!!!",t),this.setState({chatName:t}))}}},{key:"handleChange",value:function(e){this.setState({chatMessage:e.target.value})}},{key:"componentDidUpdate",value:function(e){if(e.socketMessage!==this.props.socketMessage){var t=this.socketMessageObject();if(!t)return;"color"===t.type&&this.setState({chatName:t.userName,authorColor:t.data}),"history"===t.type&&this.setState({chatHistory:t.data}),t.type,"message"===t.type&&(this.setState(function(e){return{chatHistory:[].concat(Object(d.a)(e.chatHistory),[t.data])}}),this.scrollToBottom())}}},{key:"socketMessageObject",value:function(){try{return JSON.parse(this.props.socketMessage)}catch(e){return console.log("Invalid JSON: ",this.props.socketMessage),!1}}},{key:"isUserConnected",value:function(){return!!this.socketMessageObject()}},{key:"statusText",value:function(){return this.state.chatName.length>0?this.state.chatName:"Enter name:"}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"chat"},i.a.createElement("div",{className:"content"},this.state.chatHistory.map(function(e){return i.a.createElement("p",{className:"content-message",key:e.time},i.a.createElement("span",{style:{color:"rgb("+e.color+")",marginRight:"5px",background:"none"}},e.author),e.text)}),i.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),i.a.createElement("div",{className:"chat-status-container"},i.a.createElement("div",{id:"status",className:"chat-status",style:{color:"rgb("+this.state.authorColor+")"}},this.statusText()),i.a.createElement("input",{className:"chat-input",type:"text",id:"input",value:this.state.chatMessage,disabled:this.state.disabled,onKeyPress:this.handleKeyPress,onChange:this.handleChange})))}}]),t}(s.Component)),m=(a(23),a(25),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).onKeyDown=a.onKeyDown.bind(Object(g.a)(Object(g.a)(a))),a.onKeyUp=a.onKeyUp.bind(Object(g.a)(Object(g.a)(a))),a.state={speed:a.props.speed,id:a.props.id,y:a.props.y,x:a.props.x,w:a.props.w,h:a.props.h,facingDirection:a.props.facingDirection,moving:a.props.moving,color:a.props.color,userName:a.props.userName,currentPlayerCharacter:a.props.currentPlayerCharacter,className:a.props.speed},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&this.setState({id:e.id,y:e.y,x:e.x,w:e.w,h:e.h,facingDirection:e.facingDirection,moving:e.moving,color:e.color,currentPlayerCharacter:e.currentPlayerCharacter,className:e})}},{key:"isCurrentPlayerCharacter",value:function(){return this.state.currentPlayerCharacter.id===this.props.id}},{key:"onKeyUp",value:function(e){this.isCurrentPlayerCharacter()&&("w"!==e.key&&"a"!==e.key&&"s"!==e.key&&"d"!==e.key||(this.setState({moving:!1}),this.props.connection.send(JSON.stringify({moving:!1,type:"update-character",id:this.state.id}))))}},{key:"onKeyDown",value:function(e){if(this.isCurrentPlayerCharacter()){var t=this.state.y,a=this.state.x,s=this.state.w,i=this.state.h,n=this.state.id,o=this.state.userName,r=this.state.color,c=this.state.facingDirection,h=this.state.moving,l=this.state.className;"w"===e.key&&(t=this.state.y-this.state.speed,c="up",h=!0,l="up"),"s"===e.key&&(t=this.state.y+this.state.speed,console.log("y",t),console.log("state y",this.state.y),console.log("state speed",this.state.speed),c="down",h=!0,l="down"),"a"===e.key&&(a=this.state.x-this.state.speed,c="left",h=!0,l="left"),"d"===e.key&&(a=this.state.x+this.state.speed,c="right",h=!0,l="right");var u={id:n,y:t,x:a,w:s,h:i};if(this.props.checkCollisions(u).length>0)console.log("NO MOVE");else{var g={className:l,color:r,y:t,x:a,w:s,h:i,facingDirection:c,moving:h,userName:o,id:n,type:"update-character"};this.props.registerGameLoopEvent(g)}}}},{key:"className",value:function(){var e="";switch(this.state.facingDirection){case"down":e=this.state.moving?"down-moving":"down";break;case"up":e=this.state.moving?"up-moving":"up";break;case"left":e=this.state.moving?"left-moving":"left";break;case"right":e=this.state.moving?"right-moving":"right"}return e}},{key:"render",value:function(){return i.a.createElement("div",{className:"player-character "+this.className(),key:this.state.id,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,tabIndex:"0",style:{outline:"none !important",top:this.state.y+"px",left:this.state.x+"px",width:this.state.w+"px",height:this.state.h+"px",WebkitBoxShadow:"inset 0px 10px 0px 0px rgba("+this.state.color+", .6)"}},this.state.userName)}}]),t}(s.Component)),y=(a(26),a(28),a(29),a(10)),v=a.n(y),f=(a(30),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).someRefName=i.a.createRef(),a.isBoundaryTile=a.isBoundaryTile.bind(Object(g.a)(Object(g.a)(a))),a.state={groundTile:a.randomBackgroundImage(),backgroundImage:v.a,width:32,height:32},a.id=a.props.id,a.column=a.props.column,a.gridWidth=a.props.gridWidth,a.gridHeight=a.props.gridHeight,a.rowId=a.props.rowId,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"isBoundaryTile",value:function(){return this.column===this.gridWidth-1?(this.setState({backgroundImage:""}),!0):0===this.column?(this.setState({backgroundImage:""}),!0):this.rowId===this.gridHeight-1?(this.setState({backgroundImage:""}),!0):0===this.rowId&&(this.setState({backgroundImage:""}),!0)}},{key:"randomBackgroundImage",value:function(){var e=[{x:0,y:0},{x:192,y:0},{x:160,y:0}].concat([{x:192,y:-32},{x:160,y:-32}]),t=e[Math.floor(Math.random()*e.length)];return this.setState({groundTile:t}),t}},{key:"componentDidMount",value:function(){this.isBoundaryTile()&&this.props.registerCollisionObject({id:this.id,x:this.someRefName.current.offsetLeft,y:this.someRefName.current.offsetTop,w:this.someRefName.current.offsetWidth,h:this.someRefName.current.offsetHeight})}},{key:"render",value:function(){return i.a.createElement("div",{className:"grid-tile",style:{backgroundImage:"url(".concat(this.state.backgroundImage,")"),backgroundPositionX:this.state.groundTile.x,backgroundPositionY:this.state.groundTile.y,width:this.state.width+"px",height:this.state.height+"px"},ref:this.someRefName})}}]),t}(s.Component)),A=(a(31),function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).gridWidth=a.props.gridWidth,a.gridHeight=a.props.gridHeight,a.rowId=a.props.rowId,a.gridTiles=[];var s=0;for(s=0;s<a.gridWidth;s++){var n=a.rowId+"_"+s;a.gridTiles.push(i.a.createElement(f,{id:n,key:n,rowId:a.rowId,column:s,gridWidth:a.gridWidth,gridHeight:a.gridHeight,registerCollisionObject:a.props.registerCollisionObject}))}return a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"grid-tile-row"},this.gridTiles)}}]),t}(s.Component)),k=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={playerCharacters:[],currentPlayerCharacter:{},gridHeight:20,gridWidth:38,collisionRegistry:[]},a.gameEvents=[],a.gridRows=[];for(var s=0;s<a.state.gridHeight;s++)a.gridRows.push({id:s});return a.checkCollisions=a.checkCollisions.bind(Object(g.a)(Object(g.a)(a))),a.registerCollisionObject=a.registerCollisionObject.bind(Object(g.a)(Object(g.a)(a))),a.registerGameLoopEvent=a.registerGameLoopEvent.bind(Object(g.a)(Object(g.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){return e.gameLoopTick()},10);this.setState({gameLoopIntervalId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.gameLoopIntervalId)}},{key:"gameLoopTick",value:function(){var e=this;this.gameEvents.forEach(function(t,a){e.props.connection.send(JSON.stringify(t)),e.gameEvents.splice(a,1)})}},{key:"registerGameLoopEvent",value:function(e){this.gameEvents.push(e)}},{key:"registerCollisionObject",value:function(e){this.state.collisionRegistry.push({id:e.id,x:e.x,y:e.y,w:e.w,h:e.h})}},{key:"checkCollisions",value:function(e){var t=[],a=e,s=[].concat(this.state.playerCharacters,this.state.collisionRegistry);return(s=s.filter(function(t){if(t.id)return t.id!==e.id})).forEach(function(e){var s={id:e.id,x:e.x,y:e.y,w:e.w,h:e.h};e.userName,a.x<s.x+s.w&&a.x+a.w>s.x&&a.y<s.y+s.h&&a.h+a.y>s.y&&(console.log("COLLISION DETECTED!"),t.push(s))}),t}},{key:"socketMessageObject",value:function(){try{return JSON.parse(this.props.socketMessage)}catch(e){return console.log("Invalid JSON: ",this.props.socketMessage),!1}}},{key:"update",value:function(e){delete e.type;var t=this.state.playerCharacters.findIndex(function(t){return t.id===e.id}),a=Object(d.a)(this.state.playerCharacters);a[t]=Object.assign(this.state.playerCharacters[t],e),Object.assign(a[t],e),this.setState({playerCharacters:a})}},{key:"spawnWithoutCollision",value:function(e){if(this.checkCollisions(e).length>0){var t=e.x+50;e.x=t,this.spawnWithoutCollision(e)}else{var a=Object.assign(e,{type:"update-character"});this.props.connection.send(JSON.stringify(a))}}},{key:"invoke",value:function(e){var t=this;this.setState(function(t){return{playerCharacters:[].concat(Object(d.a)(t.playerCharacters),[e])}},function(){t.spawnWithoutCollision(e)})}},{key:"remove",value:function(e){var t=this.state.playerCharacters.findIndex(function(t){return t.id===e.id}),a=Object(d.a)(this.state.playerCharacters);a.splice(t,1),this.setState({playerCharacters:a})}},{key:"componentDidUpdate",value:function(e){if(e.socketMessage!==this.props.socketMessage){var t=this.socketMessageObject();if(!t)return;"current-player-character"===t.type&&this.setState(function(e){return{currentPlayerCharacter:t}}),"invoke-character"===t.type&&this.invoke(t),"update-character"===t.type&&this.update(t),"remove-character"===t.type&&this.remove(t)}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"grid"},this.state.playerCharacters.map(function(t){return i.a.createElement(m,{id:t.id,key:t.id,y:t.y,x:t.x,w:t.w,h:t.h,facingDirection:t.facingDirection,moving:t.moving,color:t.color,userName:t.userName,speed:t.speed,connection:e.props.connection,currentPlayerCharacter:e.state.currentPlayerCharacter,checkCollisions:e.checkCollisions,collisionRegistry:e.state.collisionRegistry,registerGameLoopEvent:e.registerGameLoopEvent})}),this.gridRows.map(function(t){return i.a.createElement(A,{gridWidth:e.state.gridWidth,gridHeight:e.state.gridHeight,rowId:t.id,key:t.id,registerCollisionObject:e.registerCollisionObject})}))}}]),t}(s.Component),b=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(h.a)(this,Object(l.a)(t).call(this,e));var s=("https:"===window.location.protocol?"wss://":"ws://")+window.location.host;return a.connection=new WebSocket(s),a.connection.onopen=a.onOpen,a.connection.onerror=a.onError,a.connection.onmessage=a.onMessage.bind(Object(g.a)(Object(g.a)(a))),a.state={socketMessage:{data:""}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onOpen",value:function(){console.log("Connection is opened...")}},{key:"onError",value:function(e){console.log("Connection error occured!",e)}},{key:"onMessage",value:function(e){this.setState({socketMessage:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"app-container"},i.a.createElement(p,{connection:this.connection,socketMessage:this.state.socketMessage.data}),i.a.createElement(k,{connection:this.connection,socketMessage:this.state.socketMessage.data}))}}]),t}(s.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(h.a)(this,Object(l.a)(t).call(this,e))).state={counter:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b,{socketMessage:this.state.socketMessage}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,2,1]]]);
//# sourceMappingURL=main.40e80567.chunk.js.map